<mat-card>
    <mat-card-header>
        <mat-card-title>{{ greeting }}, {{ userName }}.</mat-card-title> 
    </mat-card-header>

    <mat-card-content>
        @if (!showQueueCreateForm) {
            <button mat-flat-button color="primary" (click)="showQueueCreateForm=true">
                <span>Add New Queue</span>
                <mat-icon>add_box</mat-icon>
            </button>
        } @else {
            <form (ngSubmit)="createQueue()">
                <mat-form-field>
                    <mat-label>Queue Name</mat-label>
                    <input matInput [(ngModel)]="newQueueTitle" name="queueTitle" required>
                </mat-form-field>

                <mat-card-actions align="end">
                    <button mat-flat-button color="secondary" (click)="showQueueCreateForm=false">
                        <span>Cancel</span>
                    </button>
                    <button mat-flat-button color="primary" type="submit">
                        <span>Create Queue</span>
                        <mat-icon>create</mat-icon>
                    </button>
                </mat-card-actions>
            </form>
        }
    </mat-card-content>
</mat-card>

<mat-card>
    <mat-card-title>My Queues</mat-card-title>

    <mat-card-content>
        <mat-list>
            @for (queue of (queues$ | async); track queue.id) {
                <mat-list-item>

                    <mat-icon matListItemIcon>
                        {{ queue.active ? 'visibility' : 'visibility_off' }}
                    </mat-icon>

                    <span matListItemTitle>
                        {{ queue.title }}
                    </span>

                    <span matListItemLine>
                        {{ queue.active ? 'Active' : 'Inactive' }}
                    </span>

                    <a matListItemMeta [routerLink]="['/queues', queue.id]">Open</a>
                    
                </mat-list-item>
            } @empty {
                <div class = "empty-state">
                    <p>You have no queues yet. Click "Add New Queue" to create your first one.</p>
                </div>
            }
        </mat-list>
    </mat-card-content>
</mat-card>
