<div class="queue-container">
    <mat-card class="queue-card">
        <mat-card-header>
            <div mat-card-avatar>
                <mat-icon class=header-icon>groups</mat-icon>
            </div>
            <mat-card-title>Current Queue</mat-card-title>
            <mat-card-subtitle>
                There are {{ (queueList$ | async)?.length || 0 }} people waiting.
            </mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
            <mat-list>
                @for (item of (queueList$ | async); track item.universityId) {
                    <mat-list-item [class.is-me]="item.name === queueService.getCurrentUser()">

                        <mat-icon matListItemIcon>person</mat-icon>

                        <span matListItemTitle>
                            {{ item.name }}
                            @if (item.name === queueService.getCurrentUser()) { (You) }
                        </span>

                        <span matListItemLine>
                            Joined: {{ item.arrivalTime + 'Z' | date:'shortTime' }}
                        </span>
                    </mat-list-item>

                } @empty {
                    <div class="empty-state">
                        <mat-icon>hourglass_empty</mat-icon>
                        <p>The queue is currently empty.</p>
                    </div>
                }
            </mat-list>
        </mat-card-content>

        <mat-card-actions align="end">
            <button 
            mat-flat-button 
            color="primary"
            (click)="joinQueue()"
            [disabled]="false">
                Join Queue
            </button>
        </mat-card-actions>
    </mat-card>
</div>
